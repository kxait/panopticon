{{ template "head" }}

<body>
  <div><a href="/">&lt;&lt; return</a></div>
  <div class="text-xl">{{ .Name }} ({{ .LogPath }})</div>
  <script>
    let scroll = false
    const toggleScroll = () => {
      scroll = !scroll
      document.getElementById("btn").innerText = scroll ? "âœ…" : "ðŸ”½"
    }
    document.addEventListener("htmx:wsAfterMessage", ({detail}) => {
      if (scroll)
        window.scrollTo(0, document.body.scrollHeight)
    })

  </script>
  <div id="lines" class="container text-sm m-auto break-all font-mono" hx-ext="ws"
    ws-connect="/logs-live?proc={{.Name}}&offset={{.Size}}">
    {{ range .Lines }}
    <div>
      {{ . }}
    </div>
    {{ end }}
  </div>
  <div id="scroll-me" class="fixed bottom-[0] text-2xl"><button id="btn" onclick="toggleScroll()">â¬‡</button></div>
</body>
